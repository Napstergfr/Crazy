{"version":3,"sources":["bootstrap-combobox.js"],"names":["$","Combobox","element","options","this","extend","fn","combobox","defaults","template","$source","$container","setup","$element","find","$target","$button","$menu","menu","appendTo","matcher","sorter","highlighter","shown","selected","refresh","transferAttributes","listen","prototype","constructor","before","hide","disable","prop","attr","disabled","addClass","enable","removeClass","parse","that","map","source","selectedValue","each","option","val","text","push","placeholder","appendId","removeAttr","undefined","select","updater","trigger","item","show","pos","position","height","offsetHeight","insertAfter","css","top","left","on","proxy","scrollSafety","off","blur","lookup","event","query","process","items","grep","length","render","slice","bsVersion","toLowerCase","indexOf","beginswith","caseSensitive","caseInsensitive","shift","concat","replace","RegExp","$1","match","i","html","first","next","prev","last","toggle","hasClass","clearTarget","triggerChange","clearElement","e","target","tagName","focus","keypress","keyup","eventSupported","keydown","click","mouseenter","mouseleave","eventName","isSupported","setAttribute","move","keyCode","preventDefault","fixMenuScroll","stopPropagation","active","bottom","scrollTop","menuHeight","suppressKeyPressRepeat","inArray","focused","mousedover","setTimeout","currentTarget","$this","data","Constructor","window","jQuery"],"mappings":"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","file":"../bootstrap-combobox.min.js","sourcesContent":["/* =============================================================\r\n * bootstrap-combobox.js v1.1.8\r\n * =============================================================\r\n * Copyright 2012 Daniel Farrell\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n * ============================================================ */\r\n\r\n(function( $ ) {\r\n\r\n \"use strict\";\r\n\r\n /* COMBOBOX PUBLIC CLASS DEFINITION\r\n  * ================================ */\r\n\r\n  var Combobox = function ( element, options ) {\r\n    this.options = $.extend({}, $.fn.combobox.defaults, options);\r\n    this.template = this.options.template || this.template\r\n    this.$source = $(element);\r\n    this.$container = this.setup();\r\n    this.$element = this.$container.find('input[type=text]');\r\n    this.$target = this.$container.find('input[type=hidden]');\r\n    this.$button = this.$container.find('.dropdown-toggle');\r\n    this.$menu = $(this.options.menu).appendTo('body');\r\n    this.matcher = this.options.matcher || this.matcher;\r\n    this.sorter = this.options.sorter || this.sorter;\r\n    this.highlighter = this.options.highlighter || this.highlighter;\r\n    this.shown = false;\r\n    this.selected = false;\r\n    this.refresh();\r\n    this.transferAttributes();\r\n    this.listen();\r\n  };\r\n\r\n  Combobox.prototype = {\r\n\r\n    constructor: Combobox\r\n\r\n  , setup: function () {\r\n      var combobox = $(this.template());\r\n      this.$source.before(combobox);\r\n      this.$source.hide();\r\n      return combobox;\r\n    }\r\n\r\n  , disable: function() {\r\n      this.$element.prop('disabled', true);\r\n      this.$button.attr('disabled', true);\r\n      this.disabled = true;\r\n      this.$container.addClass('combobox-disabled');\r\n    }\r\n\r\n  , enable: function() {\r\n      this.$element.prop('disabled', false);\r\n      this.$button.attr('disabled', false);\r\n      this.disabled = false;\r\n      this.$container.removeClass('combobox-disabled');\r\n    }\r\n  , parse: function () {\r\n      var that = this\r\n        , map = {}\r\n        , source = []\r\n        , selected = false\r\n        , selectedValue = '';\r\n      this.$source.find('option').each(function() {\r\n        var option = $(this);\r\n        if (option.val() === '') {\r\n          that.options.placeholder = option.text();\r\n          return;\r\n        }\r\n        map[option.text()] = option.val();\r\n        source.push(option.text());\r\n        if (option.prop('selected')) {\r\n          selected = option.text();\r\n          selectedValue = option.val();\r\n        }\r\n      })\r\n      this.map = map;\r\n      if (selected) {\r\n        this.$element.val(selected);\r\n        this.$target.val(selectedValue);\r\n        this.$container.addClass('combobox-selected');\r\n        this.selected = true;\r\n      }\r\n      return source;\r\n    }\r\n\r\n  , transferAttributes: function() {\r\n    this.options.placeholder = this.$source.attr('data-placeholder') || this.options.placeholder\r\n    if(this.options.appendId !== \"undefined\") {\r\n    \tthis.$element.attr('id', this.$source.attr('id') + this.options.appendId);\r\n    }\r\n    this.$element.attr('placeholder', this.options.placeholder)\r\n    this.$target.prop('name', this.$source.prop('name'))\r\n    this.$target.val(this.$source.val())\r\n    this.$source.removeAttr('name')  // Remove from source otherwise form will pass parameter twice.\r\n    this.$element.attr('required', this.$source.attr('required'))\r\n    this.$element.attr('rel', this.$source.attr('rel'))\r\n    this.$element.attr('title', this.$source.attr('title'))\r\n    this.$element.attr('class', this.$source.attr('class'))\r\n    this.$element.attr('tabindex', this.$source.attr('tabindex'))\r\n    this.$source.removeAttr('tabindex')\r\n    if (this.$source.attr('disabled')!==undefined)\r\n      this.disable();\r\n  }\r\n\r\n  , select: function () {\r\n      var val = this.$menu.find('.active').attr('data-value');\r\n      this.$element.val(this.updater(val)).trigger('change');\r\n      this.$target.val(this.map[val]).trigger('change');\r\n      this.$source.val(this.map[val]).trigger('change');\r\n      this.$container.addClass('combobox-selected');\r\n      this.selected = true;\r\n      return this.hide();\r\n    }\r\n\r\n  , updater: function (item) {\r\n      return item;\r\n    }\r\n\r\n  , show: function () {\r\n      var pos = $.extend({}, this.$element.position(), {\r\n        height: this.$element[0].offsetHeight\r\n      });\r\n\r\n      this.$menu\r\n        .insertAfter(this.$element)\r\n        .css({\r\n          top: pos.top + pos.height\r\n        , left: pos.left\r\n        })\r\n        .show();\r\n\r\n      $('.dropdown-menu').on('mousedown', $.proxy(this.scrollSafety, this));\r\n\r\n      this.shown = true;\r\n      return this;\r\n    }\r\n\r\n  , hide: function () {\r\n      this.$menu.hide();\r\n      $('.dropdown-menu').off('mousedown', $.proxy(this.scrollSafety, this));\r\n      this.$element.on('blur', $.proxy(this.blur, this));\r\n      this.shown = false;\r\n      return this;\r\n    }\r\n\r\n  , lookup: function (event) {\r\n      this.query = this.$element.val();\r\n      return this.process(this.source);\r\n    }\r\n\r\n  , process: function (items) {\r\n      var that = this;\r\n\r\n      items = $.grep(items, function (item) {\r\n        return that.matcher(item);\r\n      })\r\n\r\n      items = this.sorter(items);\r\n\r\n      if (!items.length) {\r\n        return this.shown ? this.hide() : this;\r\n      }\r\n\r\n      return this.render(items.slice(0, this.options.items)).show();\r\n    }\r\n\r\n  , template: function() {\r\n      if (this.options.bsVersion == '2') {\r\n        return '<div class=\"combobox-container\"><input type=\"hidden\" /> <div class=\"input-append\"> <input type=\"text\" autocomplete=\"off\" /> <span class=\"add-on dropdown-toggle\" data-dropdown=\"dropdown\"> <span class=\"caret\"/> <i class=\"icon-remove\"/> </span> </div> </div>'\r\n      } else {\r\n        return '<div class=\"combobox-container\"> <input type=\"hidden\" /> <div class=\"input-group\"> <input type=\"text\" autocomplete=\"off\" /> <span class=\"input-group-addon dropdown-toggle\" data-dropdown=\"dropdown\"> <span class=\"caret\" /> <span class=\"glyphicon glyphicon-remove\" /> </span> </div> </div>'\r\n      }\r\n    }\r\n\r\n  , matcher: function (item) {\r\n      return ~item.toLowerCase().indexOf(this.query.toLowerCase());\r\n    }\r\n\r\n  , sorter: function (items) {\r\n      var beginswith = []\r\n        , caseSensitive = []\r\n        , caseInsensitive = []\r\n        , item;\r\n\r\n      while (item = items.shift()) {\r\n        if (!item.toLowerCase().indexOf(this.query.toLowerCase())) {beginswith.push(item);}\r\n        else if (~item.indexOf(this.query)) {caseSensitive.push(item);}\r\n        else {caseInsensitive.push(item);}\r\n      }\r\n\r\n      return beginswith.concat(caseSensitive, caseInsensitive);\r\n    }\r\n\r\n  , highlighter: function (item) {\r\n      var query = this.query.replace(/[\\-\\[\\]{}()*+?.,\\\\\\^$|#\\s]/g, '\\\\$&');\r\n      return item.replace(new RegExp('(' + query + ')', 'ig'), function ($1, match) {\r\n        return '<strong>' + match + '</strong>';\r\n      })\r\n    }\r\n\r\n  , render: function (items) {\r\n      var that = this;\r\n\r\n      items = $(items).map(function (i, item) {\r\n        i = $(that.options.item).attr('data-value', item);\r\n        i.find('a').html(that.highlighter(item));\r\n        return i[0];\r\n      })\r\n\r\n      items.first().addClass('active');\r\n      this.$menu.html(items);\r\n      return this;\r\n    }\r\n\r\n  , next: function (event) {\r\n      var active = this.$menu.find('.active').removeClass('active')\r\n        , next = active.next();\r\n\r\n      if (!next.length) {\r\n        next = $(this.$menu.find('li')[0]);\r\n      }\r\n\r\n      next.addClass('active');\r\n    }\r\n\r\n  , prev: function (event) {\r\n      var active = this.$menu.find('.active').removeClass('active')\r\n        , prev = active.prev();\r\n\r\n      if (!prev.length) {\r\n        prev = this.$menu.find('li').last();\r\n      }\r\n\r\n      prev.addClass('active');\r\n    }\r\n\r\n  , toggle: function () {\r\n    if (!this.disabled) {\r\n      if (this.$container.hasClass('combobox-selected')) {\r\n        this.clearTarget();\r\n        this.triggerChange();\r\n        this.clearElement();\r\n      } else {\r\n        if (this.shown) {\r\n          this.hide();\r\n        } else {\r\n          this.clearElement();\r\n          this.lookup();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  , scrollSafety: function(e) {\r\n      if (e.target.tagName == 'UL') {\r\n          this.$element.off('blur');\r\n      }\r\n  }\r\n  , clearElement: function () {\r\n    this.$element.val('').focus();\r\n  }\r\n\r\n  , clearTarget: function () {\r\n    this.$source.val('');\r\n    this.$target.val('');\r\n    this.$container.removeClass('combobox-selected');\r\n    this.selected = false;\r\n  }\r\n\r\n  , triggerChange: function () {\r\n    this.$source.trigger('change');\r\n  }\r\n\r\n  , refresh: function () {\r\n    this.source = this.parse();\r\n    this.options.items = this.source.length;\r\n  }\r\n\r\n  , listen: function () {\r\n      this.$element\r\n        .on('focus',    $.proxy(this.focus, this))\r\n        .on('blur',     $.proxy(this.blur, this))\r\n        .on('keypress', $.proxy(this.keypress, this))\r\n        .on('keyup',    $.proxy(this.keyup, this));\r\n\r\n      if (this.eventSupported('keydown')) {\r\n        this.$element.on('keydown', $.proxy(this.keydown, this));\r\n      }\r\n\r\n      this.$menu\r\n        .on('click', $.proxy(this.click, this))\r\n        .on('mouseenter', 'li', $.proxy(this.mouseenter, this))\r\n        .on('mouseleave', 'li', $.proxy(this.mouseleave, this));\r\n\r\n      this.$button\r\n        .on('click', $.proxy(this.toggle, this));\r\n    }\r\n\r\n  , eventSupported: function(eventName) {\r\n      var isSupported = eventName in this.$element;\r\n      if (!isSupported) {\r\n        this.$element.setAttribute(eventName, 'return;');\r\n        isSupported = typeof this.$element[eventName] === 'function';\r\n      }\r\n      return isSupported;\r\n    }\r\n\r\n  , move: function (e) {\r\n      if (!this.shown) {return;}\r\n\r\n      switch(e.keyCode) {\r\n        case 9: // tab\r\n        case 13: // enter\r\n        case 27: // escape\r\n          e.preventDefault();\r\n          break;\r\n\r\n        case 38: // up arrow\r\n          e.preventDefault();\r\n          this.prev();\r\n          this.fixMenuScroll();\r\n          break;\r\n\r\n        case 40: // down arrow\r\n          e.preventDefault();\r\n          this.next();\r\n          this.fixMenuScroll();\r\n          break;\r\n      }\r\n\r\n      e.stopPropagation();\r\n    }\r\n\r\n  , fixMenuScroll: function(){\r\n      var active = this.$menu.find('.active');\r\n      if(active.length){\r\n          var top = active.position().top;\r\n          var bottom = top + active.height();\r\n          var scrollTop = this.$menu.scrollTop();\r\n          var menuHeight = this.$menu.height();\r\n          if(bottom > menuHeight){\r\n              this.$menu.scrollTop(scrollTop + bottom - menuHeight);\r\n          } else if(top < 0){\r\n              this.$menu.scrollTop(scrollTop + top);\r\n          }\r\n      }\r\n  }\r\n\r\n  , keydown: function (e) {\r\n      this.suppressKeyPressRepeat = ~$.inArray(e.keyCode, [40,38,9,13,27]);\r\n      this.move(e);\r\n    }\r\n\r\n  , keypress: function (e) {\r\n      if (this.suppressKeyPressRepeat) {return;}\r\n      this.move(e);\r\n    }\r\n\r\n  , keyup: function (e) {\r\n      switch(e.keyCode) {\r\n        case 40: // down arrow\r\n         if (!this.shown){\r\n           this.toggle();\r\n         }\r\n         break;\r\n        case 39: // right arrow\r\n        case 38: // up arrow\r\n        case 37: // left arrow\r\n        case 36: // home\r\n        case 35: // end\r\n        case 16: // shift\r\n        case 17: // ctrl\r\n        case 18: // alt\r\n          break;\r\n\r\n        case 9: // tab\r\n        case 13: // enter\r\n          if (!this.shown) {return;}\r\n          this.select();\r\n          break;\r\n\r\n        case 27: // escape\r\n          if (!this.shown) {return;}\r\n          this.hide();\r\n          break;\r\n\r\n        default:\r\n          this.clearTarget();\r\n          this.lookup();\r\n      }\r\n\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n  }\r\n\r\n  , focus: function (e) {\r\n      this.focused = true;\r\n    }\r\n\r\n  , blur: function (e) {\r\n      var that = this;\r\n      this.focused = false;\r\n      var val = this.$element.val();\r\n      if (!this.selected && val !== '' ) {\r\n        this.$element.val('');\r\n        this.$source.val('').trigger('change');\r\n        this.$target.val('').trigger('change');\r\n      }\r\n      if (!this.mousedover && this.shown) {setTimeout(function () { that.hide(); }, 200);}\r\n    }\r\n\r\n  , click: function (e) {\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n      this.select();\r\n      this.$element.focus();\r\n    }\r\n\r\n  , mouseenter: function (e) {\r\n      this.mousedover = true;\r\n      this.$menu.find('.active').removeClass('active');\r\n      $(e.currentTarget).addClass('active');\r\n    }\r\n\r\n  , mouseleave: function (e) {\r\n      this.mousedover = false;\r\n    }\r\n  };\r\n\r\n  /* COMBOBOX PLUGIN DEFINITION\r\n   * =========================== */\r\n  $.fn.combobox = function ( option ) {\r\n    return this.each(function () {\r\n      var $this = $(this)\r\n        , data = $this.data('combobox')\r\n        , options = typeof option == 'object' && option;\r\n      if(!data) {$this.data('combobox', (data = new Combobox(this, options)));}\r\n      if (typeof option == 'string') {data[option]();}\r\n    });\r\n  };\r\n\r\n  $.fn.combobox.defaults = {\r\n    bsVersion: '4'\r\n  , menu: '<ul class=\"typeahead typeahead-long dropdown-menu\"></ul>'\r\n  , item: '<li><a href=\"#\" class=\"dropdown-item\"></a></li>'\r\n  };\r\n\r\n  $.fn.combobox.Constructor = Combobox;\r\n\r\n}( window.jQuery ));\r\n"]}